import os
import msvcrt

# Game settings
WIDTH = 40
HEIGHT = 20
BALL_X_START = WIDTH // 2
BALL_Y_START = HEIGHT // 2
PADDLE_SIZE = 4
PADDLE_CHAR = '#'
BALL_CHAR = 'O'
SLEEP_TIME = 0.05

# Initial game state
ball_x = BALL_X_START
ball_y = BALL_Y_START
ball_dx = -1
ball_dy = 1
paddle_y = HEIGHT // 2 - PADDLE_SIZE // 2
score = 0

# Clear the console screen
os.system('cls' if os.name == 'nt' else 'clear')

# Main game loop
while True:
    # Draw the game board
    board = [[' ' for _ in range(WIDTH)] for _ in range(HEIGHT)]
    
    # Draw the paddles
    for i in range(PADDLE_SIZE):
        board[paddle_y + i][1] = PADDLE_CHAR
        board[paddle_y + i][WIDTH - 2] = PADDLE_CHAR
    
    # Draw the ball
    board[ball_y][ball_x] = BALL_CHAR
    
    # Display the score
    print(f"Score: {score}")
    
    # Print the game board
    for row in board:
        print(''.join(row))
    
    # Move the ball
    ball_x += ball_dx
    ball_y += ball_dy
    
    # Check for collision with the paddles
    if ball_x == 2 and paddle_y <= ball_y < paddle_y + PADDLE_SIZE:
        ball_dx = 1
        score += 1
    elif ball_x == WIDTH - 3 and paddle_y <= ball_y < paddle_y + PADDLE_SIZE:
        ball_dx = -1
        score += 1
    
    # Check for collision with the walls
    if ball_y == 0 or ball_y == HEIGHT - 1:
        ball_dy *= -1
    
    # Check for game over
    if ball_x == 0 or ball_x == WIDTH - 1:
        print("Game Over!")
        break
    
    # User input for paddle movement
    if msvcrt.kbhit():
        key = msvcrt.getch()
        if key == b'w' and paddle_y > 0:
            paddle_y -= 1
        elif key == b's' and paddle_y + PADDLE_SIZE < HEIGHT:
            paddle_y += 1
    
    # Sleep for a short time
    time.sleep(SLEEP_TIME)
    
    # Clear the console screen
    os.system('cls' if os.name == 'nt' else 'clear')
